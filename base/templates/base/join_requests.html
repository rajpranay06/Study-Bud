{% extends 'main.html' %}

{% block content %}
<main class="layout layout--3">
    <div class="container">
        <div class="room-header">
            <h2>Join Requests for Room: {{ room.name }}</h2>
            <a href="{% url 'room' room.id %}" class="btn btn--main">Back to Room</a>
        </div>

        <div class="join-requests-list">
            {% if join_requests %}
                {% for request in join_requests %}
                <div class="join-request-card">
                    <div class="join-request-info">
                        <div class="avatar avatar--medium">
                            <img src="{{ request.user.avatar.url }}" alt="User Avatar">
                        </div>
                        <div class="join-request-details">
                            <h3>{{ request.user.username }}</h3>
                            <p>Requested: {{ request.created_at|timesince }} ago</p>
                        </div>
                    </div>
                    <div class="join-request-actions">
                        <a href="{% url 'process-join-request' request.id 'approve' %}" class="btn btn--success">Approve</a>
                        <a href="{% url 'process-join-request' request.id 'reject' %}" class="btn btn--danger">Reject</a>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="empty-list">No pending join requests</p>
            {% endif %}
        </div>
    </div>
</main>

<style>
    .room-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }

    .join-requests-list {
        margin-top: 1.5rem;
    }

    .join-request-card {
        background-color: var(--color-dark);
        border-radius: 10px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .join-request-info {
        display: flex;
        align-items: center;
    }

    .join-request-details {
        margin-left: 1rem;
    }

    .join-request-details h3 {
        margin-bottom: 0.5rem;
    }

    .join-request-actions {
        display: flex;
        gap: 0.5rem;
    }

    .empty-list {
        color: var(--color-light-gray);
        text-align: center;
        margin-top: 2rem;
    }

    .btn--success {
        background-color: #28a745;
    }

    .btn--danger {
        background-color: #dc3545;
    }
</style>
{% endblock %} 